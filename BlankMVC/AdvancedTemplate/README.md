To create a template for [advanced routes](https://docs.xperience.io/developing-websites/implementing-routing/content-tree-based-routing/setting-up-content-tree-based-routing#Settingupcontenttreebasedrouting-Advanced) based on the content tree:

1. Create a [controller](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/MyAdvancedController.cs) that returns `TemplateResult`
1. __(Optional)__ Create page template [properties class](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/AdvancedTemplateProperties.cs) and reference it in the [controller class](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/MyAdvancedController.cs#L9)
1. __(Optional)__ Create a [ViewModel](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/AdvancedTemplateViewModel.cs) to pass information to the view. If you defined template properties, use `IPageTemplatePropertiesRetriever` to get the properties and [add them to the ViewModel](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/MyAdvancedController.cs#L23)
1. __(Optional)__ Create a [filter class](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/AdvancedTemplate/AdvancedTemplateFilter.cs) which inherits `IPageTemplateFilter` and defines what templates are available for your page type and [register](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankMVC/App_Start/ApplicationConfig.cs#L17) it
1. [Register](https://github.com/kentico-ericd/xperience-template-samples/blob/master/BlankCore/Registrations.cs#L23) the template
